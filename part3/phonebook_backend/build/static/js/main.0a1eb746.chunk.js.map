{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","greenNotificationStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","Person","person","deletePerson","name","number","onClick","Persons","persons","map","NameFilter","nameFilter","handleNameFilterChange","value","onChange","PersonForm","addNewRecord","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","App","useState","setPersons","setNewName","setNewNumber","setNameFilter","notification","setNotification","error","setError","useEffect","personServices","personsToShow","filter","includes","event","target","preventDefault","newRecord","findIndex","p","window","confirm","find","updatedPerson","setTimeout","catch","console","log","returnedPerson","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0a1eb746.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl).then(response => response.data)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject).then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\n}\n\nconst remove = (id) => {\n  return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\n}\n\nexport default {getAll, create, update, remove}\n","import React, { useState, useEffect } from 'react'\nimport personServices from './services/persons'\n\nconst Notification = ({ message, color }) => {\n  const greenNotificationStyle = {\n    color: color,\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  if (message === null || message === '') {\n    return null\n  }\n\n  return (\n    <div style={greenNotificationStyle}>\n      {message}\n    </div>\n  )\n}\n\n\nconst Person = ({person, deletePerson}) => (\n  <div>\n    {person.name} {person.number} <button onClick={deletePerson} >delete</button>\n  </div>\n)\n\nconst Persons = ({persons, deletePerson}) => (\n  <div>\n    {persons.map(person => <Person key={person.name} person={person} deletePerson={() => deletePerson(person.id)} />)}\n  </div>\n)\n\nconst NameFilter = ({nameFilter, handleNameFilterChange}) => (\n  <div>\n    filter show with <input value={nameFilter} onChange={handleNameFilterChange} />\n  </div>\n)\n\nconst PersonForm = ({addNewRecord, newName, handleNameChange, newNumber, handleNumberChange}) => (\n  <form onSubmit={addNewRecord}>\n    <div>\n      <div>name: <input value={newName} onChange={handleNameChange} /></div>\n      <div>number <input value={newNumber} onChange={handleNumberChange} /></div>\n      <div><button type=\"submit\">add</button></div>\n    </div>\n  </form>\n)\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ nameFilter, setNameFilter ] = useState('')\n  const [ notification, setNotification ] = useState('')\n  const [ error, setError ] = useState('')\n\n  useEffect(() => {\n    personServices\n      .getAll()\n      .then(persons => {\n        setPersons(persons)\n      })\n  },[])\n\n  const addNewRecord = (event) => {\n    event.preventDefault()\n    const newRecord = {name: newName, number: newNumber}\n\n    if (persons.findIndex(p => p.name === newRecord.name) >= 0){\n      const result = \n        window.confirm(`${newName} is already added to phonebook, do you want to replace old number?`)\n      if (result){\n        personServices\n          .update(persons.find(p => p.name === newRecord.name).id, newRecord)\n          .then(updatedPerson => {\n            setPersons(persons.map(person => person.id === updatedPerson.id ?\n              updatedPerson : person\n            ))\n            setNotification(`Updated ${updatedPerson.name}`)\n            setTimeout(() => {setNotification('')}, 2000)\n          })\n          .catch( error => {\n            if (error.response.data.error){\n              console.log(error.response.data)\n              setError(error.response.data.error)\n              setTimeout(() => {setError('')}, 2000)\n            } else {\n              setError(`Can't update ${newRecord.name}, it has been already removed!`)\n              setTimeout(() => {setError('')}, 2000)\n              setPersons(persons.filter(person => person.id !== persons.find(p => p.name === newRecord.name).id))\n            }\n          })\n      }\n      return\n    }\n\n    personServices\n      .create(newRecord)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setNewName('')\n        setNewNumber('')\n        setNotification(`Added ${returnedPerson.name}`)\n        setTimeout(() => {setNotification('')}, 2000)\n      })\n      .catch(error => {\n        console.log(error.response.data)\n        setError(error.response.data.error)\n        setTimeout(() => {setError('')}, 2000)\n      })\n\n  }\n  \n  const deletePerson = (id) => {\n    const result = window.confirm(`Are you sure to delete ${persons.find(person => person.id === id).name}?`);\n    if (!result){\n      return \n    }\n\n    personServices\n      .remove(id)\n      .then(() => {\n        setPersons(persons.filter(person => person.id !== id))\n      })\n      .catch(error => {\n        setError(`${persons.find(person => person.id === id).name} has been already deleted`)\n        setTimeout(() => {setError('')}, 2000)\n        setPersons(persons.filter(person => person.id !== id))\n      })\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleNameFilterChange = (event) => {\n    setNameFilter(event.target.value)\n  }\n\n  const personsToShow = persons.filter(person => person.name.includes(nameFilter))\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n        <Notification message={notification} color='green'/>\n        <Notification message={error} color='red'/>\n        <NameFilter nameFilter={nameFilter} handleNameFilterChange={handleNameFilterChange} />\n      <h2>add a new</h2>\n      <PersonForm \n        addNewRecord={addNewRecord}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}